Summary Background Current diagnostics for HIV-associated tuberculosis are suboptimal, with missed diagnoses contributing to high hospital mortality and approximately 374 000 annual HIV-positive deaths globally. Urine-based assays have a good diagnostic yield; therefore, we aimed to assess whether urine-based screening in HIV-positive inpatients for tuberculosis improved outcomes. Methods We did a pragmatic, multicentre, double-blind, randomised controlled trial in two hospitals in Malawi and South Africa. We included HIV-positive medical inpatients aged 18 years or more who were not taking tuberculosis treatment. We randomly assigned patients (1:1), using a computer-generated list of random block size stratified by site, to either the standard-of-care or the intervention screening group, irrespective of symptoms or clinical presentation. Attending clinicians made decisions about care; and patients, clinicians, and the study team were masked to the group allocation. In both groups, sputum was tested using the Xpert MTB/RIF assay (Xpert; Cepheid, Sunnyvale, CA, USA). In the standard-of-care group, urine samples were not tested for tuberculosis. In the intervention group, urine was tested with the Alere Determine TB-LAM Ag (TB-LAM; Alere, Waltham, MA, USA), and Xpert assays. The primary outcome was all-cause 56-day mortality. Subgroup analyses for the primary outcome were prespecified based on baseline CD4 count, haemoglobin, clinical suspicion for tuberculosis; and by study site and calendar time. We used an intention-to-treat principle for our analyses. This trial is registered with the ISRCTN registry, number ISRCTN71603869. Findings Between Oct 26, 2015, and Sept 19, 2017, we screened 4788 HIV-positive adults, of which 2600 (54%) were randomly assigned to the study groups (n=1300 for each group). 13 patients were excluded after randomisation from analysis in each group, leaving 2574 in the final intention-to-treat analysis (n=1287 in each group). At admission, 1861 patients were taking antiretroviral therapy and median CD4 count was 227 cells per μL (IQR 79–436). Mortality at 56 days was reported for 272 (21%) of 1287 patients in the standard-of-care group and 235 (18%) of 1287 in the intervention group (adjusted risk reduction [aRD] −2·8%, 95% CI −5·8 to 0·3; p=0·074). In three of the 12 prespecified, but underpowered subgroups, mortality was lower in the intervention group than in the standard-of-care group for CD4 counts less than 100 cells per μL (aRD −7·1%, 95% CI −13·7 to −0·4; p=0.036), severe anaemia (−9·0%, −16·6 to −1·3; p=0·021), and patients with clinically suspected tuberculosis (−5·7%, −10·9 to −0·5; p=0·033); with no difference by site or calendar period. Adverse events were similar in both groups. Interpretation Urine-based tuberculosis screening did not reduce overall mortality in all HIV-positive inpatients, but might benefit some high-risk subgroups. Implementation could contribute towards global targets to reduce tuberculosis mortality. Funding Joint Global Health Trials Scheme of the Medical Research Council, the UK Department for International Development, and the Wellcome Trust.