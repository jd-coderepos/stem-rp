Summary Background Sleep disturbance occurs in most patients with delusions or hallucinations and should be treated as a clinical problem in its own right. However, cognitive behavioural therapy (CBT)—the best evidence-based treatment for insomnia—has not been tested in this patient population. We aimed to pilot procedures for a randomised trial testing CBT for sleep problems in patients with current psychotic experiences, and to provide a preliminary assessment of potential benefit. Methods We did this prospective, assessor-blind, randomised controlled pilot trial (Better Sleep Trial [BEST]) at two mental health centres in the UK. Patients (aged 18–65 years) with persistent distressing delusions or hallucinations in the context of insomnia and a schizophrenia spectrum diagnosis were randomly assigned (1:1), via a web-based randomisation system with minimisation to balance for sex, insomnia severity, and psychotic experiences, to receive either eight sessions of CBT plus standard care (medication and contact with the local clinical team) or standard care alone. Research assessors were masked to group allocation. Assessment of outcome was done at weeks 0, 12 (post-treatment), and 24 (follow-up). The primary efficacy outcomes were insomnia assessed by the Insomnia Severity Index (ISI) and delusions and hallucinations assessed by the Psychotic Symptoms Rating Scale (PSYRATS) at week 12. We did analysis by intention to treat, with an aim to provide confidence interval estimation of treatment effects. This study is registered with ISRCTN, number 33695128. Findings Between Dec 14, 2012, and May 22, 2013, and Nov 7, 2013, and Aug 26, 2014, we randomly assigned 50 patients to receive CBT plus standard care (n=24) or standard care alone (n=26). The last assessments were completed on Feb 10, 2015. 48 (96%) patients provided follow-up data. 23 (96%) patients offered CBT took up the intervention. Compared with standard care, CBT led to reductions in insomnia in the large effect size range at week 12 (adjusted mean difference 6·1, 95% CI 3·0–9·2, effect size d=1·9). By week 12, nine (41%) of 22 patients receiving CBT and one (4%) of 25 patients receiving standard care alone no longer had insomnia, with ISI scores lower than the cutoff for insomnia. The treatment effect estimation for CBT covered a range from reducing but also increasing delusions (adjusted mean difference 0·3, 95% CI −2·0 to 2·6) and hallucinations (−1·9, −6·5 to 2·7). Three patients, all in the CBT group, had five adverse events, although none were regarded as related to study treatment. Interpretation Our findings show that CBT for insomnia might be highly effective for improving sleep in patients with persistent delusions or hallucinations. A larger, suitably powered phase 3 study is now needed to provide a precise estimate of the effects of CBT for sleep problems, both on sleep and psychotic experiences. Funding Research for Patient Benefit Programme, National Institute for Health Research.