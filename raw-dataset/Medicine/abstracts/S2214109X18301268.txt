Summary Background Intermittent preventive treatment (IPT) is a well established malaria control intervention. Evidence that delivering IPT to schoolchildren could provide community-level benefits is limited. We did a cluster-randomised controlled trial to assess the effect of IPT of primary schoolchildren with dihydroartemisinin-piperaquine (DP) on indicators of malaria transmission in the community, in Jinja, Uganda. Methods We included 84 clusters, each comprising one primary school and the 100 closest available households. The clusters were randomly assigned 1:1 to receive IPT with DP or standard care (control) by restricted randomisation to ensure balance by geography and school type. Children in intervention schools received IPT monthly for up to six rounds (June to December, 2014). We did cross-sectional community surveys in randomly selected households at baseline and in January to April, 2015, during which we measured participants' temperatures and obtained finger-prick blood smears for measurement of parasite prevalence by microscopy. We also did entomological surveys 1 night per month in households from 20 randomly selected IPT and 20 control clusters. The primary trial outcome was parasite prevalence in the final community survey. The primary entomological survey outcome was the annual entomological inoculation rate (aEIR) from July, 2014, to April, 2015. This trial is registered at ClinicalTrials.gov, number NCT02009215. Findings Among 23 280 students registered in the 42 intervention schools, 10 079 (43%) aged 5–20 years were enrolled and received at least one dose of DP. 9286 (92%) of 10 079 received at least one full course of DP (three doses). Community-level parasite prevalence was lower in the intervention clusters than in the control clusters (19% vs 23%, adjusted risk ratio 0·85, 95% CI 0·73–1·00, p=0·05). The aEIR was lower in the intervention group than in the control group, but not significantly so (10·1 vs 15·2 infective bites per person, adjusted incidence rate ratio 0·80, 95% CI 0·36–1·80, p=0·59). Interpretation IPT of schoolchildren with DP might have a positive effect on community-level malaria indicators and be operationally feasible. Studies with greater IPT coverage are needed. Funding UK Medical Research Council, UK Department for International Development, and Wellcome Trust.