Summary Background Cannabis use following the onset of first-episode psychosis has been linked to both increased risk of relapse and non-adherence with antipsychotic medication. Whether poor outcome associated with cannabis use is mediated through an adverse effect of cannabis on medication adherence is unclear. Methods In a prospective analysis of data acquired from four different adult inpatient and outpatient units of the South London and Maudsley Mental Health National Health Service Foundation Trust in London, UK, 245 patients were followed up for 2 years from the onset of first-episode psychosis. Cannabis use after onset of psychosis was assessed by self-reports in face-to-face follow-up interviews. Relapse data were collected from clinical notes using the WHO Life Chart Schedule. This measure was also used to assess medication adherence on the basis of both face-to-face interviews and clinical notes. Patients were included if they had a diagnosis of first-episode non-organic or affective psychosis according to ICD-10 criteria, and were aged between 18 and 65 years when referred to local psychiatric services. We used structural equation modelling analysis to estimate whether medication adherence partly mediated the effects of continued cannabis use on risk of relapse. The primary outcome variable was relapse, defined as admission to a psychiatric inpatient unit after exacerbation of symptoms within 2 years of first presentation to psychiatric services. Information on cannabis use over the first 2 years after onset of psychosis was investigated as a predictor variable for relapse. Medication adherence was assessed as a mediator variable on the basis of clinical records and self-report data. Study researchers (TS, NP, EK, and EF) rated the adherence. Findings 397 patients who presented with their first episode of psychosis between April 12, 2002, and July 26, 2013 had a follow-up assessment until September, 2015. Of the 397 patients approached for followed up, 133 refused to take part in this study and 19 could not be included because of missing data. 91 (37%) of 245 patients with first-episode psychosis had a relapse over the 2 years of follow-up. Continued cannabis use predicted poor outcome, including risk of relapse, number of relapses, length of relapse, and care intensity at follow-up. In controlled structural equation modelling analyses, medication adherence partly mediated the effect of continued cannabis use on outcome, including risk of relapse (proportion mediated=26%, βindirect effects=0·08, 95% CI 0·004 to 0·16), number of relapses (36%, βindirect effects=0·07, 0·003 to 0·14), time until relapse (28%, βindirect effects=–0·26, −0·53 to 0·001) and care intensity (20%, βindirect effects=0·06, 0·004 to 0·11) but not length of relapse (6%, βindirect effects=0·03, −0·03 to 0·09). The adjusted models explained moderate amounts of variance for outcomes defined as risk of relapse (R 2=0·25), number of relapses (R 2=0·21), length of relapse (R 2=0·07), time until relapse (R 2=0·08), and care intensity index (R 2=0·15). Interpretation Between 20% and 36% of the adverse effects of continued cannabis use on outcome in psychosis might be mediated through the effects of cannabis use on medication adherence. Interventions directed at medication adherence could partly help mitigate the harm from cannabis use in psychosis. Funding This study is funded by the National Institute of Health Research (NIHR) Clinician Scientist award.