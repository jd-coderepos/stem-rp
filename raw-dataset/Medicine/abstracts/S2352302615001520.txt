Summary Background The global prevalence of X-linked glucose-6-phosphate dehydrogenase (G6PD) deficiency is thought to be a result of selection by malaria, but epidemiological studies have yielded confusing results. We investigated the relationships between G6PD deficiency and both malaria and non-malarial illnesses among children in Kenya. Methods We did this study in Kilifi County, Kenya, where the G6PD c.202T allele is the only significant cause of G6PD deficiency. We tested the associations between G6PD deficiency and severe and complicated Plasmodium falciparum malaria through a case-control study of 2220 case and 3940 control children. Cases were children aged younger than 14 years, who visited the high dependency ward of Kilifi County Hospital with severe malaria between March 1, 1998, and Feb 28, 2010. Controls were children aged between 3–12 months who were born within the same study area between August 2006, and September 2010. We assessed the association between G6PD deficiency and both uncomplicated malaria and other common diseases of childhood in a cohort study of 752 children aged younger than 10 years. Participants of this study were recruited from a representative sample of households within the Ngerenya and Chonyi areas of Kilifi County between Aug 1, 1998, and July 31, 2001. The primary outcome measure for the case-control study was the odds ratio for hospital admission with severe malaria (computed by logistic regression) while for the cohort study it was the incidence rate ratio for uncomplicated malaria and non-malaria illnesses (computed by Poisson regression), by G6PD deficiency category. Findings 2863 (73%) children in the control group versus 1643 (74%) in the case group had the G6PD normal genotype, 639 (16%) versus 306 (14%) were girls heterozygous for G6PD c.202T, and 438 (11%) versus 271 (12%) children were either homozygous girls or hemizygous boys. Compared with boys and girls without G6PD deficiency, we found significant protection from severe malaria (odds ratio [OR] 0·82, 95% CI 0·70–0·97; p=0·020) among G6PD c.202T heterozygous girls but no evidence for protection among G6PD c.202T hemizygous boys and homozygous girls (OR 1·18, 0·99–1·40; p=0·056). Median follow-up for the mild disease cohort study was 2·24 years (IQR 2·22–2·85). G6PD c.202T had no effect on other common diseases of childhood in heterozygous girls (incidence rate ratio 0·98, 95% CI 0·86–1·11; p=0·82) or homozygous girls or hemizygous boys (0·93, 0·82–1·04; p=0·25), with the sole exception of a marginally significant increase in the incidence of helminth infections among heterozygous girls. Interpretation Heterozygous girls might be the driving force for the positive selection of G6PD deficiency alleles. Further studies are needed to definitively establish the mechanisms by which G6PD deficiency confers an advantage against malaria in heterozygous individuals. Such studies could lead to the development of new treatments. Funding Wellcome Trust, UK Medical Research Council, European Union, and Foundation for the National Institutes of Health (as part of the Bill & Melinda Gates Grand Challenges in Global Health Initiative).