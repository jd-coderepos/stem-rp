This paper presents a method of calculating the utility function from a smooth demand function whose Slutsky matrix is negative semi-definite and symmetric. The calculated utility function is the unique upper semi-continuous function corresponding with the demand function. Moreover, we present an axiom for demand functions. We show that under the strong axiom, this new axiom is equivalent to the existence of the corresponding continuous preference relation. If the demand function obeys this axiom, the calculated utility function is also continuous. Further, we show that the mapping from the demand function into a continuous preference relation is continuous, which ensures the applicability of our results for econometrics. Moreover, if this demand function satisfies the rank condition, then our utility function is smooth. Finally, we show that under an additional axiom, the above results hold even if the demand function has corner solutions.