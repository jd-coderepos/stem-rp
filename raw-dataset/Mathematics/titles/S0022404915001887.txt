Graph-wreath products and finiteness conditions 