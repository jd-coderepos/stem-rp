Recently, Armston et al. (2013) have demonstrated that a new, physically-based method for direct retrieval of canopy gap probability Pgap from waveform lidar can improve the estimation of Pgap over discrete return lidar data. The success of the approach was demonstrated in a savanna woodland environment in Australia. The huge advantage of this method is that it uses the data themselves to solve for the canopy contrast term i.e. the ratio of the reflectance from crown and ground, ρv/ρg. In this way the method avoids local calibration that is typically required to overcome differences in either ρv or ρg. To be more generally useful the method must be demonstrated on different sites and in the presence of slope and different sensor and survey configurations. If it is robust to these things, slope in particular, then we would suggest it is likely to be widely useful. Here, we test the robustness of the retrieval of Pgap from waveform lidar using the Watershed Allied Telemetry Experimental Research dataset, over the Heihe River Basin region of China. The data contain significant canopy, terrain and survey variations, presenting a rather different set of conditions to those previously used. Results show that ρv/ρg is seen to be stable across all flights and for all levels of spatial aggregation. This strongly supports the robustness of the new Pgap retrieval method, which assumes that this relationship is stable. A comparison between Pgap estimated from hemiphotos and from the waveform lidar showed agreement with Pearson correlation coefficient R=0.91. The waveform lidar-derived estimates of Pgap agreed to within 8% of values derived from hemiphotos, with a bias of 0.17%. The new waveform model was shown to be stable across different off-nadir scan angles and in the presence of slopes up to 26° with R≥0.85 in all cases. We also show that the waveform model can be used to calculate Pgap using just the mean value of canopy returns, assuming that their distribution is unimodal. Lastly, we show that the method can also be applied to discrete return lidar data, albeit with slightly lower accuracy and higher bias, allowing Pgap comparisons with previously-collected lidar datasets. Our results show the new method should be applicable for estimating Pgap robustly across large areas, and from lidar data collected at different times and using different systems; an increasingly important requirement.