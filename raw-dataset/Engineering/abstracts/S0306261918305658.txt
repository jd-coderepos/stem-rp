As the share of renewable energy sources in the energy mix is increasing, new challenges arise regarding the grid integration. This research focuses on a solution for one of these challenges, namely the employment of batteries to address the mismatch in electrical power between electricity supply from photovoltaic systems and household electricity demand. Herein, the optimal sizing of batteries for household self-consumption is combined with peak shaving at district level, whereas previous studies only looked at these questions in isolation. Our analysis makes use of a unique set of power measurement data from 79 households in the Dutch city of Amersfoort, in 295 evenly distributed days, with a resolution of 10 s. By using simulation of batteries and Net Present Value analysis, the average optimal storage size for self-consumption in the case of net metering abolishment for households with photovoltaic systems was determined to be 3.4 kWh. Large differences were observed between different households; photovoltaic system size, total net metered consumption and specific characteristics of load profiles resulted into optimal storage sizes in the range of 0.5â€“9 kWh. The impact of these optimally sized batteries on neighborhood peak demand was assessed and found to be limited, corresponding to a decrease of 5.7%. The peak shaving potential was further assessed under different control strategies of the batteries. Results show that the impact could be amplified to a decrease of 22% or 51% when the batteries are controlled by using heuristics or by assuming perfect foresight together with a power minimization algorithm, respectively. The findings of this paper emphasize the importance of collaboration between households and other stakeholders, such as distributed system operators and retailers in transitioning to a sustainable power system.