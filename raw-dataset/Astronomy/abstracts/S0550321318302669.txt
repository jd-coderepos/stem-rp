We present a systematic short time expansion for the generating function of the one point height probability distribution for the KPZ equation with droplet initial condition, which goes much beyond previous studies. The expansion is checked against a numerical evaluation of the known exact Fredholm determinant expression. We also obtain the next order term for the Brownian initial condition. Although initially devised for short time, a resummation of the series allows to obtain also the long time large deviation function, found to agree with previous works using completely different techniques. Unexpected similarities with stationary large deviations of TASEP with periodic and open boundaries are discussed. Two additional applications are given. (i) Our method is generalized to study the linear statistics of the Airy point process, i.e. of the GUE edge eigenvalues. We obtain the generating function of the cumulants of the empirical measure to a high order. The second cumulant is found to match the result in the bulk obtained from the Gaussian free field by Borodin and Ferrari [1,2], but we obtain systematic corrections to the Gaussian free field (higher cumulants, expansion towards the edge). This also extends a result of Basor and Widom [3] to a much higher order. We obtain large deviation functions for the Airy point process for a variety of linear statistics test functions. (ii) We obtain results for the counting statistics of trapped fermions at the edge of the Fermi gas in both the high and the low temperature limits.