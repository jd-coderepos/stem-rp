We constrain proton structure fluctuations at small-x by comparing with the HERA diffractive vector meson production data, and find that large geometric fluctuations in the proton wave function are needed. Hydrodynamical simulations of proton-nucleus collisions including the fluctuating proton structure are found to be compatible with the momentum anisotropies measured at the LHC.