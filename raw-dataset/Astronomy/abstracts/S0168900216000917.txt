Presently available high-energy proton beams in circular accelerators carry enough momentum to accelerate high-intensity electron and positron beams to the TeV energy scale over several hundred meters of the plasma with a density of about 10 15 cm − 3 . However, the plasma wavelength at this density is 100–1000 times shorter than the typical longitudinal size of the high-energy proton beam. Therefore the self-modulation instability (SMI) of a long (~10cm) proton beam in the plasma should be used to create the train of micro-bunches which would then drive the plasma wake resonantly. Changing the plasma density profile offers a simple way to control the development of the SMI and the acceleration of particles during this process. We present simulations of the possible use of a plasma density gradient as a way to control the acceleration of the electron beam during the development of the SMI of a 400GeV proton beam in a 10m long plasma. This work is done in the context of the AWAKE project—the proof-of-principle experiment on proton driven plasma wakefield acceleration at CERN.