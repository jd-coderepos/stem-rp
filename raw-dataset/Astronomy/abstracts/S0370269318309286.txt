Motivated by the R K and R K ⁎ anomalies from B decays, we extend the minimal supersymmetric model with a non-universal anomaly-free U ( 1 ) ′ gauge symmetry, coupling non-universally to the lepton sector as well as the quark sector. In particular, only the third generation quarks are charged under this U ( 1 ) ′ , which can easily evade the dilepton bound from the LHC searches. An extra singlet is introduced to break this U ( 1 ) ′ symmetry allowing for the μ-term to be generated dynamically. The relevant constraints of B s − B ¯ s mixing, D 0 − D ¯ 0 mixing and the LHC dilepton searches are considered. We find that in the allowed parameter space this U ( 1 ) ′ gauge interaction can accommodate the R K and R K ⁎ anomalies and weaken considerably the Z ′ mass limits while remaining perturbative up to the Planck scale.