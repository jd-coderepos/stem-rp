Matter effects on the flavor conversions of solar neutrinos and high-energy astrophysical neutrinos 