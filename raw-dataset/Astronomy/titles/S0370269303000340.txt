Exact superpotentials in N=1 theories with flavor and their matrix model formulation 