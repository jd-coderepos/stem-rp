Generalized gauge U(1) family symmetry for quarks and leptons 