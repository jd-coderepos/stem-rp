Muon reconstruction and identification in CMS Run I and towards Run II 