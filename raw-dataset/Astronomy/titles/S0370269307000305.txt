Black hole thermodynamics with generalized uncertainty principle 