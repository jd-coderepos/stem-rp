Design, calibration, and performance of the MINERvA detector 