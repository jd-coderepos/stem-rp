Dynamical D-terms in supergravity 