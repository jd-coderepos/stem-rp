P-V criticality of AdS black holes in a general framework 