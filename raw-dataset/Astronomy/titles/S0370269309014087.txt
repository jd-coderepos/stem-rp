Cosmology with long-lived charged massive particles 