Quantum mechanics of charged black holes 