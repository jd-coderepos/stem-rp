Summary Long-term consumption of fatty foods is associated with obesity, macrophage activation and inflammation, metabolic imbalance, and a reduced lifespan. We took advantage of Drosophila genetics to investigate the role of macrophages and the pathway(s) that govern their response to dietary stress. Flies fed a lipid-rich diet presented with increased fat storage, systemic activation of JAK-STAT signaling, reduced insulin sensitivity, hyperglycemia, and a shorter lifespan. Drosophila macrophages produced the JAK-STAT-activating cytokine upd3, in a scavenger-receptor (crq) and JNK-dependent manner. Genetic depletion of macrophages or macrophage-specific silencing of upd3 decreased JAK-STAT activation and rescued insulin sensitivity and the lifespan of Drosophila, but did not decrease fat storage. NF-κB signaling made no contribution to the phenotype observed. These results identify an evolutionarily conserved “scavenger receptor-JNK-type 1 cytokine” cassette in macrophages, which controls glucose metabolism and reduces lifespan in Drosophila maintained on a lipid-rich diet via activation of the JAK-STAT pathway.