Summary Background Accurate monitoring of changes in dietary patterns in response to food policy implementation is challenging. Metabolic profiling allows simultaneous measurement of hundreds of metabolites in urine, the concentrations of which can be affected by food intake. We hypothesised that metabolic profiles of urine samples developed under controlled feeding conditions reflect dietary intake and can be used to model and classify dietary patterns of free-living populations. Methods In this randomised, controlled, crossover trial, we recruited healthy volunteers (aged 21–65 years, BMI 20–35 kg/m2) from a database of a clinical research unit in the UK. We developed four dietary interventions with a stepwise variance in concordance with the WHO healthy eating guidelines that aim to prevent non-communicable diseases (increase fruits, vegetables, whole grains, and dietary fibre; decrease fats, sugars, and salt). Participants attended four inpatient stays (72 h each, separated by at least 5 days), during which they were given one dietary intervention. The order of diets was randomly assigned across study visits. Randomisation was done by an independent investigator, with the use of opaque, sealed, sequentially numbered envelopes that each contained one of the four dietary interventions in a random order. Participants and investigators were not masked from the dietary intervention, but investigators analysing the data were masked from the randomisation order. During each inpatient period, urine was collected daily over three timed periods: morning (0900–1300 h), afternoon (1300–1800 h), and evening and overnight (1800–0900 h); 24 h urine samples were obtained by pooling these samples. Urine samples were assessed by proton nuclear magnetic resonance (1H-NMR) spectroscopy, and diet-discriminatory metabolites were identified. We developed urinary metabolite models for each diet and identified the associated metabolic profiles, and then validated the models using data and samples from the INTERMAP UK cohort (n=225) and a healthy-eating Danish cohort (n=66). This study is registered with ISRCTN, number ISRCTN43087333. Findings Between Aug 13, 2013, and May 18, 2014, we contacted 300 people with a letter of invitation. 78 responded, of whom 26 were eligible and invited to attend a health screening. Of 20 eligible participants who were randomised, 19 completed all four 72 h study stays between Oct 2, 2013, and July 29, 2014, and consumed all the food provided. Analysis of 1H-NMR spectroscopy data indicated that urinary metabolic profiles of the four diets were distinct. Significant stepwise differences in metabolite concentrations were seen between diets with the lowest and highest metabolic risks. Application of the derived metabolite models to the validation datasets confirmed the association between urinary metabolic and dietary profiles in the INTERMAP UK cohort (p<0·0001) and the Danish cohort (p<0·0001). Interpretation Urinary metabolite models developed in a highly controlled environment can classify groups of free-living people into consumers of diets associated with lower or higher non-communicable disease risk on the basis of multivariate metabolite patterns. This approach enables objective monitoring of dietary patterns in population settings and enhances the validity of dietary reporting. Funding UK National Institute for Health Research and UK Medical Research Council.