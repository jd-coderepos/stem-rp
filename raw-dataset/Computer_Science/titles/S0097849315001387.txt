A discriminative approach to perspective shape from shading in uncalibrated illumination 